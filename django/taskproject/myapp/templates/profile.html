{% extends "base.html" %}
{% block title %}Profile{% endblock %}

{% block content %}
<div class="bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen flex justify-center items-center p-6">

    <div class="bg-white w-full max-w-3xl rounded-3xl shadow-2xl p-10 
        transition-all duration-500 hover:shadow-blue-300 hover:-translate-y-1">

        <!-- Profile Header -->
        <div class="flex flex-col items-center mb-10">
            
            <!-- FORM START: Photo Upload Mate -->
            <!-- action="" no matlab aa page j reload thase data sathe -->
            <form method="POST" enctype="multipart/form-data" class="relative group">
                {% csrf_token %}
                
                <!-- Profile Image Display -->
                {% if user.profile_pic %}
                    <img src="{{ user.profile_pic.url }}"
                         class="w-40 h-40 rounded-full shadow-xl border-4 border-white object-cover
                         transition-all duration-300 group-hover:opacity-90" 
                         alt="Profile Photo"/>
                {% else %}
                    <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png"
                         class="w-40 h-40 rounded-full shadow-xl border-4 border-white object-cover
                         transition-all duration-300 group-hover:opacity-90" 
                         alt="Default Profile"/>
                {% endif %}

                <!-- Camera Icon (Label acts as button) -->
                <!-- Click karta file manager khulse -->
                <label for="profile_upload_input" 
                   class="absolute bottom-2 right-2 bg-blue-600 text-white p-2 rounded-full shadow-lg 
                   hover:bg-blue-700 hover:scale-110 transition-all duration-300 cursor-pointer"
                   title="Change Profile Photo">
                    
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z" />
                    </svg>
                </label>

                <!-- HIDDEN INPUT -->
                <!-- Jevi file select thase, 'onchange' form ne submit kari dese -->
                <input id="profile_upload_input" 
                       type="file" 
                       name="profile_pic" 
                       class="hidden" 
                       accept="image/*"
                       onchange="this.form.submit()">
            </form>
            <!-- FORM END -->

            <h1 class="text-4xl font-bold text-gray-800 mt-6">{{ user.fullname }}</h1>
            <p class="text-gray-500 text-lg">{{ user.email }}</p>

            <a href="{% url 'update_profile' user.id %}" class="mt-6 bg-blue-600 text-white px-6 py-2 rounded-xl font-semibold
                transition-all duration-300 hover:bg-blue-700 hover:scale-105 hover:shadow-lg hover:shadow-blue-300">
                Update Details
            </a>
        </div>

        <!-- Profile Details Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="p-6 bg-gray-50 rounded-2xl shadow-md transition-all duration-300 hover:shadow-xl hover:scale-[1.02]">
                <h2 class="text-2xl font-bold text-gray-700 mb-4">Personal Info</h2>
                <p class="mb-2"><span class="font-bold">Name:</span> {{ user.fullname }}</p>
                <p class="mb-2"><span class="font-bold">Email:</span> {{ user.email }}</p>
                <p class="mb-2"><span class="font-bold">Phone:</span> {{ user.mobil }}</p> 
                <p class="mb-2"><span class="font-bold">City:</span> {{ user.city }}</p>
            </div>

            <div class="p-6 bg-gray-50 rounded-2xl shadow-md transition-all duration-300 hover:shadow-xl hover:scale-[1.02]">
                <h2 class="text-2xl font-bold text-gray-700 mb-4">Account Details</h2>
                <p class="mb-2"><span class="font-bold">Account Created:</span> 12 Feb 2024</p> 
                <p class="mb-2"><span class="font-bold">Last Login:</span> Today</p>
                <p class="mb-2"><span class="font-bold">Status:</span> Active</p>
                <p class="mb-2"><span class="font-bold">Role:</span> User</p>
            </div>
        </div>

        <!-- Buttons -->
        <div class="mt-12 flex justify-center gap-6">
            <a href="/" class="bg-gray-900 text-white px-6 py-2 rounded-xl transition-all duration-300 hover:shadow-[0_0_20px_5px_rgba(0,150,255,0.7)] hover:scale-105">Back to Home</a>
            <a href="/userlogout/" class="bg-red-600 text-white px-6 py-2 rounded-xl transition-all duration-300 hover:bg-red-700 hover:scale-105 hover:shadow-xl hover:shadow-red-300">Logout</a>
        </div>
    </div>
</div>
{% endblock %}